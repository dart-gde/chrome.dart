        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>js Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="favicon.ico">
        
        </head>
        <body data-library="js">
        <div class="page">
        <div class="header">
          <a href="index.html"><div class="logo"></div></a>
          <a href="index.html">Dart Documentation</a>
         &rsaquo; <a href="js.html">js</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
<h2><strong>js</strong> library</h2>
<div class="doc"><p>The js.dart library provides simple JavaScript invocation from Dart that
works on both Dartium and on other modern browsers via Dart2JS.</p>
<p>It provides a model based on scoped <a class="crossref" href="js/Proxy.html">Proxy</a> objects.  Proxies give Dart
code access to JavaScript objects, fields, and functions as well as the
ability to pass Dart objects and functions to JavaScript functions.  Scopes
enable developers to use proxies without memory leaks - a common challenge
with cross-runtime interoperation.</p>
<p>The top-level <a class="crossref" href="js.html#context">context</a> getter provides a <a class="crossref" href="js/Proxy.html">Proxy</a> to the global JavaScript
context for the page your Dart code is running on.  In the following example:</p>
<pre><code>import 'package:js/js.dart' as js;

void main() {
  js.context.alert('Hello from Dart via JavaScript');
}
</code></pre>
<p>js.context.alert creates a proxy to the top-level alert function in
JavaScript.  It is invoked from Dart as a regular function that forwards to
the underlying JavaScript one.  By default, proxies are released when
the currently executing event completes, e.g., when main is completes
in this example.</p>
<p>The library also enables JavaScript proxies to Dart objects and functions.
For example, the following Dart code:</p>
<pre><code>js.context.dartCallback = new Callback.once((x) =&gt; print(x*2));
</code></pre>
<p>defines a top-level JavaScript function 'dartCallback' that is a proxy to
the corresponding Dart function.  The <a class="crossref" href="js/Callback.html#once">Callback.once</a> constructor allows the
proxy to the Dart function to be retained across multiple events;
instead it is released after the first invocation.  (This is a common
pattern for asychronous callbacks.)</p>
<p>Note, parameters and return values are intuitively passed by value for
primitives and by reference for non-primitives.  In the latter case, the
references are automatically wrapped and unwrapped as proxies by the library.</p>
<p>This library also allows construction of JavaScripts objects given a <a class="crossref" href="js/Proxy.html">Proxy</a>
to a corresponding JavaScript constructor.  For example, if the following
JavaScript is loaded on the page:</p>
<pre><code>function Foo(x) {
  this.x = x;
}

Foo.prototype.add = function(other) {
  return new Foo(this.x + other.x);
}
</code></pre>
<p>then, the following Dart:</p>
<pre><code>var foo = new js.Proxy(js.context.Foo, 42);
var foo2 = foo.add(foo);
print(foo2.x);
</code></pre>
<p>will construct a JavaScript Foo object with the parameter 42, invoke its
add method, and return a <a class="crossref" href="js/Proxy.html">Proxy</a> to a new Foo object whose x field is 84.</p>
<p>See <a href="http://dart-lang.github.com/js-interop/example">samples</a> for more
examples of usage.</p>
<p>See this <a href="http://www.dartlang.org/articles/js-dart-interop">article</a> for
more detailed discussion.</p></div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="context">
<button class="show-code">Code</button>
final <a href="js/Proxy.html">Proxy</a>         <strong>context</strong> <a class="anchor-link"
            href="#context"
            title="Permalink to context">#</a>
        </h4>
        <div class="doc">
<p>Returns a proxy to the global JavaScript context for this page.</p>
<pre class="source">
Proxy get context {
 _enterScopeIfNeeded();
 return _deserialize(_jsPortSync.callSync([]));
}
</pre>
</div>
</div>
</div>
<div>
<h3>Functions</h3>
<div class="method"><h4 id="proxyCount">
<button class="show-code">Code</button>
int <strong>proxyCount</strong>({all: false, dartOnly: false, jsOnly: false}) <a class="anchor-link" href="#proxyCount"
              title="Permalink to proxyCount">#</a></h4>
<div class="doc">
<p>Returns the number of allocated proxy objects matching the given
conditions.  By default, the total number of live proxy objects are
return.  In a well behaved program, this should stay below a small
bound.</p>
<p>Set 
<span class="param">all</span> to true to return the total number of proxies ever allocated.
Set 
<span class="param">dartOnly</span> to only count proxies to Dart objects (live or all).
Set 
<span class="param">jsOnly</span> to only count proxies to JavaScript objects (live or all).</p>
<pre class="source">
int proxyCount({all: false, dartOnly: false, jsOnly: false}) {
 final js = !dartOnly;
 final dart = !jsOnly;
 final jsCounts = js ? _proxyCountJavaScript() : null;
 var sum = 0;
 if (!all) {
   if (js)
     sum += jsCounts[0];
   if (dart)
     sum += _proxiedObjectTable.count;
 } else {
   if (js)
     sum += jsCounts[1];
   if (dart)
     sum += _proxiedObjectTable.total;
 }
 return sum;
}
</pre>
</div>
</div>
<div class="method"><h4 id="array">
<button class="show-code">Code</button>
<a href="js/Proxy.html">Proxy</a> <strong>array</strong>(Iterable data) <a class="anchor-link" href="#array"
              title="Permalink to array">#</a></h4>
<div class="doc">
<p>Converts a Dart <a class="crossref" href="dart_core/Iterable.html">Iterable</a> to a JavaScript array and return a <a class="crossref" href="js/Proxy.html">Proxy</a> to it.</p>
<pre class="source">
Proxy array(Iterable data) =&gt; new Proxy._json(data);
</pre>
</div>
</div>
<div class="method"><h4 id="map">
<button class="show-code">Code</button>
<a href="js/Proxy.html">Proxy</a> <strong>map</strong>(Map data) <a class="anchor-link" href="#map"
              title="Permalink to map">#</a></h4>
<div class="doc">
<p>Converts a Dart map 
<span class="param">data</span> to a JavaScript map and return a <a class="crossref" href="js/Proxy.html">Proxy</a> to it.</p>
<pre class="source">
Proxy map(Map data) =&gt; new Proxy._json(data);
</pre>
</div>
</div>
<div class="method"><h4 id="deleteProperty">
<button class="show-code">Code</button>
void <strong>deleteProperty</strong>(<a href="js/Serializable.html">Serializable</a>&lt;<a href="js/Proxy.html">Proxy</a>&gt; proxy, String name) <a class="anchor-link" href="#deleteProperty"
              title="Permalink to deleteProperty">#</a></h4>
<div class="doc">
<p>Delete the 
<span class="param">name</span> property of 
<span class="param">proxy</span>.</p>
<pre class="source">
void deleteProperty(Serializable&lt;Proxy&gt; proxy, String name) {
 _jsPortDeleteProperty.callSync([proxy.toJs(), name].map(_serialize).toList());
}
</pre>
</div>
</div>
<div class="method"><h4 id="hasProperty">
<button class="show-code">Code</button>
bool <strong>hasProperty</strong>(<a href="js/Serializable.html">Serializable</a>&lt;<a href="js/Proxy.html">Proxy</a>&gt; proxy, String name) <a class="anchor-link" href="#hasProperty"
              title="Permalink to hasProperty">#</a></h4>
<div class="doc">
<p>Check if 
<span class="param">proxy</span> has a 
<span class="param">name</span> property.</p>
<pre class="source">
bool hasProperty(Serializable&lt;Proxy&gt; proxy, String name) =&gt;
 _jsPortHasProperty.callSync([proxy.toJs(), name].map(_serialize).toList());
</pre>
</div>
</div>
<div class="method"><h4 id="instanceof">
<button class="show-code">Code</button>
bool <strong>instanceof</strong>(<a href="js/Serializable.html">Serializable</a>&lt;<a href="js/Proxy.html">Proxy</a>&gt; proxy, <a href="js/Serializable.html">Serializable</a>&lt;<a href="js/FunctionProxy.html">FunctionProxy</a>&gt; type) <a class="anchor-link" href="#instanceof"
              title="Permalink to instanceof">#</a></h4>
<div class="doc">
<p>Check if 
<span class="param">proxy</span> is instance of 
<span class="param">type</span>.</p>
<pre class="source">
bool instanceof(Serializable&lt;Proxy&gt; proxy, Serializable&lt;FunctionProxy&gt; type) =&gt;
   _jsPortInstanceof.callSync([proxy.toJs(), type.toJs()].map(_serialize)
       .toList());
</pre>
</div>
</div>
<div class="method"><h4 id="release">
<button class="show-code">Code</button>
void <strong>release</strong>(<a href="js/Serializable.html">Serializable</a>&lt;<a href="js/Proxy.html">Proxy</a>&gt; object) <a class="anchor-link" href="#release"
              title="Permalink to release">#</a></h4>
<div class="doc">
<p>Releases a retained 
<span class="param">object</span>.</p>
<pre class="source">
void release(Serializable&lt;Proxy&gt; object) {
 _jsInvalidate.callSync(_serialize(object.toJs()));
}
</pre>
</div>
</div>
<div class="method"><h4 id="retain">
<button class="show-code">Code</button>
dynamic <strong>retain</strong>(<a href="js/Serializable.html">Serializable</a>&lt;<a href="js/Proxy.html">Proxy</a>&gt; object) <a class="anchor-link" href="#retain"
              title="Permalink to retain">#</a></h4>
<div class="doc">
<p>Retains the given 
<span class="param">object</span> beyond the current scope.
Instead, it will need to be explicitly released.
The given 
<span class="param">object</span> is returned for convenience.</p>
<pre class="source">
dynamic retain(Serializable&lt;Proxy&gt; object) {
 _jsGlobalize.callSync(_serialize(object.toJs()));
 return object;
}
</pre>
</div>
</div>
<div class="method"><h4 id="$experimentalExitScope">
<button class="show-code">Code</button>
void <strong>$experimentalExitScope</strong>(int depth) <a class="anchor-link" href="#$experimentalExitScope"
              title="Permalink to $experimentalExitScope">#</a></h4>
<div class="doc">
<p>WARNING: This API is experimental and may be removed.</p>
<pre class="source">
void $experimentalExitScope(int depth) {
 _exitScope(depth);
}
</pre>
</div>
</div>
<div class="method"><h4 id="$experimentalEnterScope">
<button class="show-code">Code</button>
int <strong>$experimentalEnterScope</strong>() <a class="anchor-link" href="#$experimentalEnterScope"
              title="Permalink to $experimentalEnterScope">#</a></h4>
<div class="doc">
<p>WARNING: This API is experimental and may be removed.</p>
<pre class="source">
int $experimentalEnterScope() {
 return _enterScope();
}
</pre>
</div>
</div>
<div class="method"><h4 id="scoped">
<button class="show-code">Code</button>
dynamic <strong>scoped</strong>(f) <a class="anchor-link" href="#scoped"
              title="Permalink to scoped">#</a></h4>
<div class="doc">
<p>Executes the closure 
<span class="param">f</span> within a scope.  Any proxies created within this
scope are invalidated afterward unless they are converted to a global proxy.</p>
<pre class="source">
scoped(f) {
 var depth = _enterScope();
 try {
   return f();
 } finally {
   _exitScope(depth);
 }
}
</pre>
</div>
</div>
</div>
<div>
<h3>Abstract Classes</h3>
          <div class="type">
          <h4>
            <a href="js/Serializable.html"><strong>Serializable&lt;T&gt;</strong></a>
          </h4>
          </div>
          
</div>
<div>
<h3>Classes</h3>
          <div class="type">
          <h4>
            <a href="js/Callback.html"><strong>Callback</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="js/FunctionProxy.html"><strong>FunctionProxy</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="js/Proxy.html"><strong>Proxy</strong></a>
          </h4>
          </div>
          
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-09-10 20:20:27.648</div>
        </div>
        <script async src="client-live-nav.js"></script>
        </body></html>
        
