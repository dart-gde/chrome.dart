        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>UdpClient class / chrome.socket Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="chrome.socket" data-type="UdpClient">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../chrome.socket.html">chrome.socket</a> &rsaquo; <a href="../chrome.socket/UdpClient.html">UdpClient</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>UdpClient</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<pre class="source">
class UdpClient {
 Logger _logger = new Logger("UdpClient");

 String host;
 int port;
 SocketType _socketType;
 CreateInfo _createInfo;
 bool _isConnected = false;
 bool get isConnected =&gt; _isConnected;

 Function onData; // Called when data is available.

 UdpClient(this.host, this.port);

 Future &lt;bool&gt; connect() {
   var completer = new Completer();

   _socketType = new SocketType('udp');
   Socket.create(_socketType).then((CreateInfo createInfo) {
     _logger.fine("Socket.create.then = ${createInfo}");
     _createInfo = createInfo;

     Socket.connect(_createInfo.socketId, host, port).then((int result) {

       if (result == 0) {
         _isConnected = true;

         // TODO(adam): setup poll?

         completer.complete(_isConnected);
       } else {
         completer.complete(_isConnected);
       }

     });
   });

   return completer.future;
 }

 void poll() {
   _logger.fine("poll()");
   Socket.read(_createInfo.socketId).then((SocketReadInfo readInfo) {
     if (readInfo.resultCode &gt; 0 &amp;&amp; onData != null) {
       onData(readInfo);
     }
     poll();
   });
 }

 Future&lt;SocketWriteInfo&gt; send(String message) {
   _logger.fine("send()");
   var completer = new Completer();
   var blob = new html.Blob([message]);
   var fileReader = new html.FileReader();
   fileReader.onLoad.listen((html.Event event) {
     var uint8Array = new typed_data.Uint8List.view(fileReader.result);
     Socket.write(_createInfo.socketId, uint8Array)
         .then((SocketWriteInfo writeInfo) {
           completer.complete(writeInfo);
         });
   });
   fileReader.readAsArrayBuffer(blob);
   return completer.future;
 }

 //receive() {}

 void disconnect() {
   _logger.fine("disconnect()");
   if (_createInfo != null) {
     Socket.disconnect(_createInfo.socketId);
     Socket.destroy(_createInfo.socketId);
   }

   _isConnected = false;
 }
}
</pre>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="">
<button class="show-code">Code</button>
new <strong>UdpClient</strong>(String host, int port) <a class="anchor-link" href="#"
              title="Permalink to UdpClient.UdpClient">#</a></h4>
<div class="doc">
<div class="inherited">
<p>Creates a new <a class="crossref" href="../dart_core/Object.html">Object</a> instance.</p>
<p><a class="crossref" href="../dart_core/Object.html">Object</a> instances have no meaningful state, and are only useful
through their identity. An <a class="crossref" href="../dart_core/Object.html">Object</a> instance is equal to itself
only.</p>
<div class="docs-inherited-from">docs inherited from Object </div></div>
<pre class="source">
UdpClient(this.host, this.port);
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="host">
<button class="show-code">Code</button>
String         <strong>host</strong> <a class="anchor-link"
            href="#host"
            title="Permalink to UdpClient.host">#</a>
        </h4>
        <div class="doc">
<pre class="source">
String host
</pre>
</div>
</div>
<div class="field"><h4 id="isConnected">
<button class="show-code">Code</button>
final bool         <strong>isConnected</strong> <a class="anchor-link"
            href="#isConnected"
            title="Permalink to UdpClient.isConnected">#</a>
        </h4>
        <div class="doc">
<pre class="source">
bool get isConnected =&gt; _isConnected;
</pre>
</div>
</div>
<div class="field"><h4 id="onData">
<button class="show-code">Code</button>
Function         <strong>onData</strong> <a class="anchor-link"
            href="#onData"
            title="Permalink to UdpClient.onData">#</a>
        </h4>
        <div class="doc">
<pre class="source">
Function onData
</pre>
</div>
</div>
<div class="field"><h4 id="port">
<button class="show-code">Code</button>
int         <strong>port</strong> <a class="anchor-link"
            href="#port"
            title="Permalink to UdpClient.port">#</a>
        </h4>
        <div class="doc">
<pre class="source">
int port
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="connect">
<button class="show-code">Code</button>
Future&lt;bool&gt; <strong>connect</strong>() <a class="anchor-link" href="#connect"
              title="Permalink to UdpClient.connect">#</a></h4>
<div class="doc">
<pre class="source">
Future &lt;bool&gt; connect() {
 var completer = new Completer();

 _socketType = new SocketType('udp');
 Socket.create(_socketType).then((CreateInfo createInfo) {
   _logger.fine("Socket.create.then = ${createInfo}");
   _createInfo = createInfo;

   Socket.connect(_createInfo.socketId, host, port).then((int result) {

     if (result == 0) {
       _isConnected = true;

       // TODO(adam): setup poll?

       completer.complete(_isConnected);
     } else {
       completer.complete(_isConnected);
     }

   });
 });

 return completer.future;
}
</pre>
</div>
</div>
<div class="method"><h4 id="disconnect">
<button class="show-code">Code</button>
void <strong>disconnect</strong>() <a class="anchor-link" href="#disconnect"
              title="Permalink to UdpClient.disconnect">#</a></h4>
<div class="doc">
<pre class="source">
void disconnect() {
 _logger.fine("disconnect()");
 if (_createInfo != null) {
   Socket.disconnect(_createInfo.socketId);
   Socket.destroy(_createInfo.socketId);
 }

 _isConnected = false;
}
</pre>
</div>
</div>
<div class="method"><h4 id="poll">
<button class="show-code">Code</button>
void <strong>poll</strong>() <a class="anchor-link" href="#poll"
              title="Permalink to UdpClient.poll">#</a></h4>
<div class="doc">
<pre class="source">
void poll() {
 _logger.fine("poll()");
 Socket.read(_createInfo.socketId).then((SocketReadInfo readInfo) {
   if (readInfo.resultCode &gt; 0 &amp;&amp; onData != null) {
     onData(readInfo);
   }
   poll();
 });
}
</pre>
</div>
</div>
<div class="method"><h4 id="send">
<button class="show-code">Code</button>
Future&lt;<a href="../chrome.socket/SocketWriteInfo.html">SocketWriteInfo</a>&gt; <strong>send</strong>(String message) <a class="anchor-link" href="#send"
              title="Permalink to UdpClient.send">#</a></h4>
<div class="doc">
<pre class="source">
Future&lt;SocketWriteInfo&gt; send(String message) {
 _logger.fine("send()");
 var completer = new Completer();
 var blob = new html.Blob([message]);
 var fileReader = new html.FileReader();
 fileReader.onLoad.listen((html.Event event) {
   var uint8Array = new typed_data.Uint8List.view(fileReader.result);
   Socket.write(_createInfo.socketId, uint8Array)
       .then((SocketWriteInfo writeInfo) {
         completer.complete(writeInfo);
       });
 });
 fileReader.readAsArrayBuffer(blob);
 return completer.future;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-10-22 18:21:00.676</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
